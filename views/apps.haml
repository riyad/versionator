
#apps
  %h2
    Applications
  - @apps.each do |app|
    %div{ :id => "#{app.basic_name}-app", :class => "container border-all app #{app.basic_name}-app" }
      = toggle_container("##{app.basic_name}-app", :expanded)
      .head
        %h3.toggle.button
          = mini_logo_for(app)
          = app.app_name
      .body
        .logo= logo_for(app)
        %h3.toggle.button
          = mini_logo_for(app)
          = app.app_name
        .content
          .newest-version
            Newest Version:
            %span.version
            = ajax_loader
            %a.check-newest-version.button
              = image("version-check-newest")
              Check
          .project-links
            = link_to_app_project(app)
          .dirs.container
            Installations:
            %ul.vertical.list
              - @installs_for_app[app].each do |install|
                %li{ :id => dom_id_for_dir(install.base_dir), :class => "dir" }
                  = image("folder")
                  = install.base_dir
                  %span.description
                    %span.installed-version
                      Installed:
                      %span.version>= install.installed_version
                    = link_to_app_release(install, :installed_version)
:javascript
  function updateVerdicts(app) {
    var nv = $(app).find(".newest-version .version").text();
    var installs = $(app).find(".dir");
    $(installs).each(function() {
      var img = $(this).find("img").not(".description img");
      var iv = $(this).find(".version").text();

      $(this).addClass("verdict border-all");
      if (nv == iv) {
        $(this).addClass("up-to-date");
        $(img).replaceWith('#{image("verdict-up-to-date-mini")}');
      } else {
        $(this).addClass("outdated");
        $(img).replaceWith('#{image("verdict-outdated-mini")}');
      }
    });
  }
